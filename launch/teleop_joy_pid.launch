<?xml version="1.0"?>
<launch>
    <!-- Launches the Arduino differential drive ROS node -->
    <!-- Sometimes this one causes issues and won't connect -->
    <node pkg="rosserial_python" type="serial_node.py" name="serial_node">
        <param name="port" value="/dev/ttyACM0"/>
        <param name="baud" value="57600"/>
    </node>

    <!-- Launches the key stroke publisher and a new xterm to type in -->
    <node
        pkg="teleop"
        type="teleop_joy.py"
        name="joystick_driver"
    />

    <!-- Launches the key to twist publisher -->
    <!-- joy node -->
    <node respawn="true" pkg="joy"
        type="joy_node" name="turtle_joy" >
        <param name="dev" type="string" value="/dev/input/js1" />
        <param name="deadzone" value="0.12" />
    </node>

    <!-- Launches the left wheel PID controller -->
    <node name="left_wheel_pid" pkg="pid" type="controller" >
        <param name="Kp" value="5.0" />
        <param name="Ki" value="0.0" />
        <param name="Kd" value="0.1" />
        <param name="upper_limit" value="10" />
        <param name="lower_limit" value="-10" />
        <param name="windup_limit" value="10" />
        <param name="max_loop_frequency" value="100.0" /> <!-- In Hz -->
        <param name="min_loop_frequency" value="100.0" /> <!-- In Hz -->
    </node>
    <!-- Launches the right wheel PID controller -->
    <node name="right_wheel_pid" pkg="pid" type="controller" >
        <param name="Kp" value="5.0" />
        <param name="Ki" value="0.0" />
        <param name="Kd" value="0.1" />
        <param name="upper_limit" value="10" />
        <param name="lower_limit" value="-10" />
        <param name="windup_limit" value="10" />
        <param name="max_loop_frequency" value="100.0" /> <!-- In Hz -->
        <param name="min_loop_frequency" value="100.0" /> <!-- In Hz -->
    </node>
</launch>
